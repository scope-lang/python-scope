var cpow=(obj,p)->{
var angle=Math.atan2(obj.i,obj.r)*p;
var len=Math.pow(Math.pow(obj.i*obj.i+obj.r*obj.r,0.5),p);
return {r:Math.cos(angle)*len,i:Math.sin(angle)*len};
};
var cadd=(a,b)->{
return {r:a.r+b.r,i:a.i+b.i};
};
var standard=["@", "$", "B", "%", "8", "&", "W", "M", "#", "*", "o", "a", "h", "k", "b", "d", "p", "q", "w", "m", "Z", "O", "0", "Q", "L", "C", "J", "U", "Y", "X", "z", "c", "v", "u", "n", "x", "r", "j", "f", "t", "/", "|", "(", ")", "1", "{", "}", "[", "]", "?", "-", "_", "+", "~", "<", ">", "i", "!", "l", "I", ";", ":", ",", "\"", "^", "`", "\'", ".", " "];
var mandelbrot=(x,y)->{
var c={r:x,i:y};//{r:-0.2,i:0};//{r:x,i:y};
var z={r:x+0,i:y+0};
var n=0;
for(n=0;n<68;n++){
  z=cadd(cpow(z,2),c);
  if(Math.pow(z.i*z.i+z.r*z.r,0.5)>2) {
    break;
  }
}
return standard[n];
};


var pictureSize=60;
var xScale=5/8;
var center={r:0,i:0};
var zoom=1;//1/0.010696;
for(var yy=0;yy<pictureSize;yy++){
var row="";
  for(var xx=0;xx<(pictureSize/xScale);xx++){
    var re=((4*xx/pictureSize)*xScale-2)/zoom-center.r;
    var im=(4*yy/pictureSize-2)/zoom+center.i;
    //console.log(re,im);
    row=row+mandelbrot(re,im);
  }
  console.log(row);
};

/*var julia=(x,y)->{
var c={r:-0.19,i:0};//{r:x,i:y};
var z={r:x+0,i:y+0};
var n=0;
for(n=0;n<68*2;n++){
  z=cadd(cpow(z,1.5),c);
  if(Math.pow(z.i*z.i+z.r*z.r,0.5)>2) {
    break;
  }
}
return standard[(n%10)*6];
};
var s=10;
var pictureSize=60;
var xScale=5/8;
for(var yy=0;yy<pictureSize;yy++){
var row="";
  for(var xx=0;xx<(pictureSize/xScale);xx++){
    var re=((4*xx/pictureSize)*xScale-2)/s-0.536264;
    var im=(4*yy/pictureSize-2)/s;
    //console.log(re,im);
    row=row+julia(re,im);
  }
  console.log(row);
};*/
